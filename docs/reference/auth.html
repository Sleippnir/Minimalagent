<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Authentication</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="favicon-16.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="screen">
        <div class="auth-container">
        <div class="text-center mb-8">
            <h1>Interview Access</h1>
            <p>Authenticating your interview session...</p>
        </div>

        <!-- Loading State -->
        <div id="loading-state" class="auth-state">
            <div class="loader mb-4"></div>
            <p>Please wait while we verify your access...</p>
        </div>

        <!-- Success State -->
        <div id="success-state" class="hidden auth-state">
            <div style="width: 3rem; height: 3rem; background-color: #2ecc71; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <svg style="width: 1.5rem; height: 1.5rem; color: white;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h2>Authentication Successful!</h2>
            <p>Redirecting you to your interview...</p>
        </div>

        <!-- Error State -->
        <div id="error-state" class="hidden auth-state">
            <div style="width: 3rem; height: 3rem; background-color: #e74c3c; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <svg style="width: 1.5rem; height: 1.5rem; color: white;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </div>
            <h2>Authentication Failed</h2>
            <p id="error-message">There was an error verifying your access.</p>
            <button onclick="retryAuth()">Try Again</button>
        </div>

        <!-- Debug Info (hidden by default) -->
        <div id="debug-info" class="hidden" style="margin-top: 2rem; padding: 1rem; background: rgba(10, 25, 47, 0.5); border-radius: 8px;">
            <h3 style="margin-bottom: 0.5rem;">Debug Information</h3>
            <div style="font-size: 0.75rem; color: var(--text-secondary);">
                <div><strong>Interview ID:</strong> <span id="debug-interview-id">Not found</span></div>
                <div><strong>Auth State:</strong> <span id="debug-auth-state">Checking...</span></div>
                <div><strong>URL Params:</strong> <span id="debug-url-params">Parsing...</span></div>
            </div>
        </div>
    </div>
    </div>

    <script type="module">
        // Load Supabase config for standalone pages
        import { SUPABASE_CONFIG } from './js/config/supabase.js';
        SUPABASE_CONFIG.then(config => {
            window.SUPABASE_CONFIG = config;
        }).catch(err => {
            console.error('Failed to load Supabase config:', err);
        });
    </script>
    <script type="module" src="auth.js"></script>
</body>
</html>